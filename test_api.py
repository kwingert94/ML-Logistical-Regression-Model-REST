import unittest
import main

singleGoodData = {'x0': 0.042317,
                  'x1': -3.3447210000000003,
                  'x2': 4.635124212161472,
                  'x3': -0.5983959993003629,
                  'x4': -0.6477715045570444,
                  'x5': 'monday',
                  'x6': 0.184902,
                  'x7': 46.690015,
                  'x8': 3.034132,
                  'x9': 0.364704,
                  'x10': 14.260733,
                  'x11': -1.559332,
                  'x12': '$5,547.78',
                  'x13': 0.520324,
                  'x14': 31.212255,
                  'x15': 4.891671,
                  'x16': 0.357763,
                  'x17': 14.766366,
                  'x18': -17.467243,
                  'x19': 0.224628,
                  'x20': 0.096752,
                  'x21': 1.305564,
                  'x22': 0.353632,
                  'x23': 3.909028,
                  'x24': -91.273052,
                  'x25': 1.396952,
                  'x26': 4.401593,
                  'x27': 0.443086,
                  'x28': 14.048787,
                  'x29': -0.932243,
                  'x30': 5.255472,
                  'x31': 'germany',
                  'x32': 0.54199153,
                  'x33': 2.98948039,
                  'x34': -1.78334189,
                  'x35': 0.80127315,
                  'x36': -2.60231221,
                  'x37': 3.39682926,
                  'x38': -1.22322646,
                  'x39': -2.20977636,
                  'x40': -68.69,
                  'x41': 522.25,
                  'x42': -428.69,
                  'x43': 381.37,
                  'x44': 0.0197503,
                  'x45': 0.75116479,
                  'x46': 0.8630479007977094,
                  'x47': -1.0383166613479036,
                  'x48': -0.27261876352216863,
                  'x49': -0.3430207259042951,
                  'x50': 0.31090086655652394,
                  'x51': -0.7978419740300581,
                  'x52': -2.0390175152938923,
                  'x53': 0.87182889,
                  'x54': 0.14373012,
                  'x55': -1.15212514,
                  'x56': -2.1703139704,
                  'x57': -0.26784296202800567,
                  'x58': 0.21211063295318527,
                  'x59': 1.6926559406621045,
                  'x60': -0.9522767913493433,
                  'x61': -0.8625864974123282,
                  'x62': 0.07484871579558282,
                  'x63': '36.29%',
                  'x64': 3.47125327,
                  'x65': -3.16656509,
                  'x66': 0.65446814,
                  'x67': 14.60067029,
                  'x68': -20.57521013,
                  'x69': 0.71083785,
                  'x70': 0.16983767,
                  'x71': 0.55082127,
                  'x72': 0.62814576,
                  'x73': 3.38608078,
                  'x74': -112.45263714,
                  'x75': 1.48370808,
                  'x76': 1.77035368,
                  'x77': 0.75702363,
                  'x78': 14.75731742,
                  'x79': -0.62550355,
                  'x80': '',
                  'x81': 'October',
                  'x82': 'Female',
                  'x83': -0.7116680715420765,
                  'x84': -0.26535598920105635,
                  'x85': 0.5175495906776872,
                  'x86': -1.0881027091519955,
                  'x87': -1.8188638198005096,
                  'x88': -1.3584469526619427,
                  'x89': -0.6549951949654567,
                  'x90': -0.493304226235515,
                  'x91': 0.373853,
                  'x92': 0.94143481,
                  'x93': 3.54679834,
                  'x94': -99.8574882,
                  'x95': 0.403926,
                  'x96': 1.65378726,
                  'x97': 0.00771459,
                  'x98': -32.02164582,
                  'x99': -60.3127828}

multipleGoodData = [{'x0': 0.042317,
                     'x1': -3.3447210000000003,
                     'x2': 4.635124212161472,
                     'x3': -0.5983959993003629,
                     'x4': -0.6477715045570444,
                     'x5': 'monday',
                     'x6': 0.184902,
                     'x7': 46.690015,
                     'x8': 3.034132,
                     'x9': 0.364704,
                     'x10': 14.260733,
                     'x11': -1.559332,
                     'x12': '$5,547.78',
                     'x13': 0.520324,
                     'x14': 31.212255,
                     'x15': 4.891671,
                     'x16': 0.357763,
                     'x17': 14.766366,
                     'x18': -17.467243,
                     'x19': 0.224628,
                     'x20': 0.096752,
                     'x21': 1.305564,
                     'x22': 0.353632,
                     'x23': 3.909028,
                     'x24': -91.273052,
                     'x25': 1.396952,
                     'x26': 4.401593,
                     'x27': 0.443086,
                     'x28': 14.048787,
                     'x29': -0.932243,
                     'x30': 5.255472,
                     'x31': 'germany',
                     'x32': 0.54199153,
                     'x33': 2.98948039,
                     'x34': -1.78334189,
                     'x35': 0.80127315,
                     'x36': -2.60231221,
                     'x37': 3.39682926,
                     'x38': -1.22322646,
                     'x39': -2.20977636,
                     'x40': -68.69,
                     'x41': 522.25,
                     'x42': -428.69,
                     'x43': 381.37,
                     'x44': 0.0197503,
                     'x45': 0.75116479,
                     'x46': 0.8630479007977094,
                     'x47': -1.0383166613479036,
                     'x48': -0.27261876352216863,
                     'x49': -0.3430207259042951,
                     'x50': 0.31090086655652394,
                     'x51': -0.7978419740300581,
                     'x52': -2.0390175152938923,
                     'x53': 0.87182889,
                     'x54': 0.14373012,
                     'x55': -1.15212514,
                     'x56': -2.1703139704,
                     'x57': -0.26784296202800567,
                     'x58': 0.21211063295318527,
                     'x59': 1.6926559406621045,
                     'x60': -0.9522767913493433,
                     'x61': -0.8625864974123282,
                     'x62': 0.07484871579558282,
                     'x63': '36.29%',
                     'x64': 3.47125327,
                     'x65': -3.16656509,
                     'x66': 0.65446814,
                     'x67': 14.60067029,
                     'x68': -20.57521013,
                     'x69': 0.71083785,
                     'x70': 0.16983767,
                     'x71': 0.55082127,
                     'x72': 0.62814576,
                     'x73': 3.38608078,
                     'x74': -112.45263714,
                     'x75': 1.48370808,
                     'x76': 1.77035368,
                     'x77': 0.75702363,
                     'x78': 14.75731742,
                     'x79': -0.62550355,
                     'x80': '',
                     'x81': 'October',
                     'x82': 'Female',
                     'x83': -0.7116680715420765,
                     'x84': -0.26535598920105635,
                     'x85': 0.5175495906776872,
                     'x86': -1.0881027091519955,
                     'x87': -1.8188638198005096,
                     'x88': -1.3584469526619427,
                     'x89': -0.6549951949654567,
                     'x90': -0.493304226235515,
                     'x91': 0.373853,
                     'x92': 0.94143481,
                     'x93': 3.54679834,
                     'x94': -99.8574882,
                     'x95': 0.403926,
                     'x96': 1.65378726,
                     'x97': 0.00771459,
                     'x98': -32.02164582,
                     'x99': -60.3127828},
                    {'x0': -1.03316,
                     'x1': -0.34014,
                     'x2': 5.871823267093174,
                     'x3': '',
                     'x4': 0.12213313902703374,
                     'x5': 'tuesday',
                     'x6': 0.997773,
                     'x7': 51.581411,
                     'x8': 1.709219,
                     'x9': 0.844079,
                     'x10': 14.105233,
                     'x11': -2.5433,
                     'x12': '$-5,483.24',
                     'x13': 0.28742,
                     'x14': 35.743492,
                     'x15': 4.415237,
                     'x16': 0.110435,
                     'x17': 14.944933,
                     'x18': -18.755392,
                     'x19': 0.075041,
                     'x20': 0.214917,
                     'x21': -4.123163,
                     'x22': 0.72766,
                     'x23': 3.006255,
                     'x24': -113.387174,
                     'x25': 1.229528,
                     'x26': 3.748232,
                     'x27': 0.840611,
                     'x28': 14.441707,
                     'x29': -0.120849,
                     'x30': 5.015867,
                     'x31': 'america',
                     'x32': 0.821254,
                     'x33': 2.55354495,
                     'x34': -1.84863863,
                     'x35': 1.6950307,
                     'x36': 1.51292076,
                     'x37': 3.51865516,
                     'x38': -1.5228092,
                     'x39': -2.2853103,
                     'x40': -1576.44,
                     'x41': -1109.88,
                     'x42': -158.62,
                     'x43': -1828.94,
                     'x44': 0.49520292,
                     'x45': -2.20971925,
                     'x46': -0.690305716163116,
                     'x47': -1.2241275979842796,
                     'x48': -1.2228860901205947,
                     'x49': -1.8189779439382878,
                     'x50': 0.020347397416074088,
                     'x51': 2.3119441850454394,
                     'x52': -0.07435673356064304,
                     'x53': -0.0576265,
                     'x54': 0.1030348,
                     'x55': 0.59564248,
                     'x56': 1.626547456,
                     'x57': -1.0763060909840458,
                     'x58': 0.591320350072612,
                     'x59': -1.0877765187234452,
                     'x60': 1.27014337340356,
                     'x61': 0.6933246356337982,
                     'x62': 0.7255990172130561,
                     'x63': '6.25%',
                     'x64': 39.62417626,
                     'x65': -0.34046576,
                     'x66': 0.81113762,
                     'x67': 14.36705547,
                     'x68': -19.82612589,
                     'x69': 0.33424312,
                     'x70': 0.21591107,
                     'x71': -4.88384906,
                     'x72': 0.76257143,
                     'x73': 3.63539031,
                     'x74': -81.42302571,
                     'x75': 0.01061658,
                     'x76': 0.08064429,
                     'x77': 0.2150197,
                     'x78': 14.84293049,
                     'x79': -2.10231995,
                     'x80': 6.35264328,
                     'x81': 'November',
                     'x82': 'Male',
                     'x83': 0.7997773236062501,
                     'x84': -0.1304857222272298,
                     'x85': -0.212689557461508,
                     'x86': -0.284131119606305,
                     'x87': -0.45520687219275524,
                     'x88': -0.6754269968594849,
                     'x89': -0.10510873880386888,
                     'x90': 0.5211188486643189,
                     'x91': 0.148424,
                     'x92': 0.92530093,
                     'x93': 3.83042567,
                     'x94': -101.1057483,
                     'x95': 0.05577509,
                     'x96': 0.56488992,
                     'x97': 0.05171552,
                     'x98': -32.5406118,
                     'x99': -266.72579479}]


class TestRestAPI(unittest.TestCase):

    def setUp(self):
        self.app = main.app.test_client()
        self.app.testing = True

    def singleJSON(self):
        response = self.app.post('/predict', singleGoodData)
        self.assertEqual(response.status_code, 200)

    def multipleJSON(self):
        response = self.app.post('/predict', multipleGoodData)
        self.assertEqual(response.status_code, 200)


if __name__ == '__main__':
    unittest.main()
